
<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="C Tidyverse | Experimentology" />
<meta property="og:type" content="book" />




<meta name="author" content="Michael C. Frank, Mika Braginsky, Julie Cachia, Nicholas Coles, Tom Hardwicke, Robert Hawkins, Maya Mathur, and Rondeline Williams" />


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="C Tidyverse | Experimentology">

<title>C Tidyverse | Experimentology</title>

<link href="libs/tufte-css-2015.12.29/tufte-fonts.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-italics.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.18/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<link rel="stylesheet" type="text/css" href="/assets/src/index.page.client.jsx.2855b89a.css"></head>
<body>



<div class="row">
<div class="col-sm-12">
<div id="island_0"><header class="_toc_1lnsy_1" id="toc"><a class="_book_title_1lnsy_24" href="/">Experimentology: An Open Science Approach to Experimental Psychology Methods</a><nav><div class="_part_1lnsy_16"><div class="_part_title_1lnsy_24"><div class="_part_title_first_1lnsy_59">Preliminaries</div><div class="_part_title_rest_1lnsy_32"></div></div><div class="_dropdown_1lnsy_16"><a class="_chapter_title_1lnsy_32" href="1-experiments">Experiments</a><a class="_chapter_title_1lnsy_32" href="2-theories">Theories</a><a class="_chapter_title_1lnsy_32" href="3-replication">Replication</a><a class="_chapter_title_1lnsy_32" href="4-ethics">Ethics</a></div></div><div class="_part_1lnsy_16"><div class="_part_title_1lnsy_24"><div class="_part_title_first_1lnsy_59">Statistics</div><div class="_part_title_rest_1lnsy_32"></div></div><div class="_dropdown_1lnsy_16"><a class="_chapter_title_1lnsy_32" href="5-estimation">Estimation</a><a class="_chapter_title_1lnsy_32" href="6-inference">Inference</a><a class="_chapter_title_1lnsy_32" href="7-models">Models</a></div></div><div class="_part_1lnsy_16"><div class="_part_title_1lnsy_24"><div class="_part_title_first_1lnsy_59">Design</div><div class="_part_title_rest_1lnsy_32"></div></div><div class="_dropdown_1lnsy_16"><a class="_chapter_title_1lnsy_32" href="8-measurement">Measurement</a><a class="_chapter_title_1lnsy_32" href="9-design">Design</a><a class="_chapter_title_1lnsy_32" href="10-sampling">Sampling</a></div></div><div class="_part_1lnsy_16"><div class="_part_title_1lnsy_24"><div class="_part_title_first_1lnsy_59">Execution</div><div class="_part_title_rest_1lnsy_32"></div></div><div class="_dropdown_1lnsy_16"><a class="_chapter_title_1lnsy_32" href="11-prereg">Preregistration</a><a class="_chapter_title_1lnsy_32" href="12-collection">Data collection</a><a class="_chapter_title_1lnsy_32" href="13-management">Project management</a></div></div><div class="_part_1lnsy_16"><div class="_part_title_1lnsy_24"><div class="_part_title_first_1lnsy_59">Reporting</div><div class="_part_title_rest_1lnsy_32"></div></div><div class="_dropdown_1lnsy_16"><a class="_chapter_title_1lnsy_32" href="14-writing">Writing</a><a class="_chapter_title_1lnsy_32" href="15-viz">Visualization</a><a class="_chapter_title_1lnsy_32" href="16-meta">Meta-analysis</a><a class="_chapter_title_1lnsy_32" href="17-conclusions">Conclusions</a></div></div><div class="_part_1lnsy_16"><div class="_part_title_1lnsy_24"><div class="_part_title_first_1lnsy_59">Appendices</div><div class="_part_title_rest_1lnsy_32"></div></div><div class="_dropdown_1lnsy_16"><a class="_chapter_title_1lnsy_32" href="A-git">GitHub</a><a class="_chapter_title_1lnsy_32" href="B-rmarkdown">R Markdown</a><a class="_chapter_title_1lnsy_32" href="C-tidyverse">Tidyverse</a><a class="_chapter_title_1lnsy_32" href="D-ggplot">ggplot</a><a class="_chapter_title_1lnsy_32" href="E-instructors">Instructor’s guide</a></div></div></nav></header></div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="tidyverse" class="section level1" number="20">
<h1><span class="header-section-number">C</span> Tidyverse</h1>
<div id="island_1"><div class="box learning_goals"><div class="Collapsible"><span id="collapsible-trigger-1662960241486" class="Collapsible__trigger is-closed" aria-expanded="false" aria-disabled="false" aria-controls="collapsible-content-1662960241486" role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="apple-whole" class="svg-inline--fa fa-apple-whole " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M224 112c-8.8 0-16-7.2-16-16V80c0-44.2 35.8-80 80-80h16c8.8 0 16 7.2 16 16V32c0 44.2-35.8 80-80 80H224zM0 288c0-76.3 35.7-160 112-160c27.3 0 59.7 10.3 82.7 19.3c18.8 7.3 39.9 7.3 58.7 0c22.9-8.9 55.4-19.3 82.7-19.3c76.3 0 112 83.7 112 160c0 128-80 224-160 224c-16.5 0-38.1-6.6-51.5-11.3c-8.1-2.8-16.9-2.8-25 0c-13.4 4.7-35 11.3-51.5 11.3C80 512 0 416 0 288z"></path></svg>Learning goals<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angles-down" class="svg-inline--fa fa-angles-down " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M246.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 402.7 361.4 265.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-160 160zm160-352l-160 160c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 210.7 361.4 73.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3z"></path></svg></span><div id="collapsible-content-1662960241486" class="Collapsible__contentOuter" style="height: 0px; -webkit-transition: height 300ms ease; ms-transition: height 300ms ease; transition: height 300ms ease; overflow: hidden;" role="region" aria-labelledby="collapsible-trigger-1662960241486"><div class="Collapsible__contentInner">
<ul>
<li>Explain what “tidy data” is and why it’s a useful uniform format for behavioral data</li>
<li>Master a set of tidyverse “verbs” for manipulating tidy data</li>
<li>Begin exploring the set of tools that will let you make untidy data tidier.</li>
<li>Explore extensions within this ecosystem</li>
</ul>
</div></div></div></div></div>
<blockquote>
<p>“Tidy datasets are all alike, but every messy dataset is messy in its own way.” - Hadley Wickham</p>
</blockquote>
<p>This Appendix is a short tutorial on how to use the <code>tidyverse</code> family of packages in R. The tidyverse is a coherent “stack” for cleaning, manipulating, visualizing, and modeling data. It’s what we’ve used throughout this book both in the visible examples and on the back-end. It’s also – in our opinion – a really impressive piece of design thinking. The tidyverse implements a clear and flexible conceptual model for the manipulation of heterogeneous datasets. It takes a little while to get your head around this conceptual model, but it is very useful once you do!</p>
<p>Here’s the basic idea: In tidy data, every row is a single <strong>observation</strong> (trial), and every column describes a <strong>variable</strong> with some <strong>value</strong> describing that trial. And if you know that data are formatted this way, then you can do amazing things, basically because you can take a uniform approach to the dataset. Here’s a quote from <span class="citation">Wickham &amp; Grolemund (<a href="#ref-wickham2016" role="doc-biblioref">2016</a>)</span><label for="tufte-sn-284" class="margin-toggle sidenote-number">284</label><input type="checkbox" id="tufte-sn-284" class="margin-toggle" /><span class="sidenote"><span class="sidenote-number">284</span> This book, <a href="http://r4ds.had.co.nz/">R for data scientists</a>, is a free web book that provides a much deeper treatment of the concepts we introduce here and is a great reference for learning the tidyverse, written by its chief architect.</span>:</p>
<blockquote>
<p>There’s a general advantage to picking one consistent way of storing data. If you have a consistent data structure, it’s easier to learn the tools that work with it because they have an underlying uniformity. There’s a specific advantage to placing variables in columns because it allows R’s vectorised nature to shine.</p>
</blockquote>
<p>Let’s explore what this means and how it works. We’ll do that first by exploring functions and “pipes”, then we’ll introduce tidyverse data manipulation. We’ll then look at how to make datasets tidier. Finally, we’ll end with some pointers towards future directions.</p>
<p>Unlike some of the other tutorials in this book, this one is meant to be worked on interactively. The best way to use it is to download the raw source code from <a href="https://raw.githubusercontent.com/langcog/experimentology/main/102-tidyverse.Rmd">here</a> and read through, filling in the exercises as you go.</p>
<div id="functions-and-pipes" class="section level2" number="20.1">
<h2><span class="header-section-number">C.1</span> Functions and Pipes</h2>
<p>Everything you typically want to do in statistical programming uses <strong>functions</strong>. <code>mean</code> is a good example. <code>mean</code> takes one <strong>argument</strong>, a numeric vector. Pipes are a way to write strings of functions more easily.<label for="tufte-sn-285" class="margin-toggle sidenote-number">285</label><input type="checkbox" id="tufte-sn-285" class="margin-toggle" /><span class="sidenote"><span class="sidenote-number">285</span> We’re going to use the R native pipe, written <code>|></code>. At time of writing, this new operator just replaced the “old” pipe, <code>%>%</code>.</span> They bring the first argument of the function to the beginning.</p>
<p>We’ll use the <code>mtcars</code> dataset that’s built in with the <code>tidyverse</code>. Here’s what a sample of that dataset looks like, using the <code>kable</code> function (which we learned in Appendix <a href="B-rmarkdown.html#rmarkdown">B</a>).</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="C-tidyverse.html#cb14-1" aria-hidden="true" tabIndex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(mtcars), <span class="at">digits =</span> <span class="dv">1</span>)</span></code></pre></div>
<table><thead><tr><th style="text-align: left;">
</th><th style="text-align: right;">
mpg
</th><th style="text-align: right;">
cyl
</th><th style="text-align: right;">
disp
</th><th style="text-align: right;">
hp
</th><th style="text-align: right;">
drat
</th><th style="text-align: right;">
wt
</th><th style="text-align: right;">
qsec
</th><th style="text-align: right;">
vs
</th><th style="text-align: right;">
am
</th><th style="text-align: right;">
gear
</th><th style="text-align: right;">
carb
</th></tr></thead><tbody><tr><td style="text-align: left;">
Mazda RX4
</td><td style="text-align: right;">
21.0
</td><td style="text-align: right;">
6
</td><td style="text-align: right;">
160
</td><td style="text-align: right;">
110
</td><td style="text-align: right;">
3.9
</td><td style="text-align: right;">
2.6
</td><td style="text-align: right;">
16.5
</td><td style="text-align: right;">
0
</td><td style="text-align: right;">
1
</td><td style="text-align: right;">
4
</td><td style="text-align: right;">
4
</td></tr><tr><td style="text-align: left;">
Mazda RX4 Wag
</td><td style="text-align: right;">
21.0
</td><td style="text-align: right;">
6
</td><td style="text-align: right;">
160
</td><td style="text-align: right;">
110
</td><td style="text-align: right;">
3.9
</td><td style="text-align: right;">
2.9
</td><td style="text-align: right;">
17.0
</td><td style="text-align: right;">
0
</td><td style="text-align: right;">
1
</td><td style="text-align: right;">
4
</td><td style="text-align: right;">
4
</td></tr><tr><td style="text-align: left;">
Datsun 710
</td><td style="text-align: right;">
22.8
</td><td style="text-align: right;">
4
</td><td style="text-align: right;">
108
</td><td style="text-align: right;">
93
</td><td style="text-align: right;">
3.9
</td><td style="text-align: right;">
2.3
</td><td style="text-align: right;">
18.6
</td><td style="text-align: right;">
1
</td><td style="text-align: right;">
1
</td><td style="text-align: right;">
4
</td><td style="text-align: right;">
1
</td></tr><tr><td style="text-align: left;">
Hornet 4 Drive
</td><td style="text-align: right;">
21.4
</td><td style="text-align: right;">
6
</td><td style="text-align: right;">
258
</td><td style="text-align: right;">
110
</td><td style="text-align: right;">
3.1
</td><td style="text-align: right;">
3.2
</td><td style="text-align: right;">
19.4
</td><td style="text-align: right;">
1
</td><td style="text-align: right;">
0
</td><td style="text-align: right;">
3
</td><td style="text-align: right;">
1
</td></tr><tr><td style="text-align: left;">
Hornet Sportabout
</td><td style="text-align: right;">
18.7
</td><td style="text-align: right;">
8
</td><td style="text-align: right;">
360
</td><td style="text-align: right;">
175
</td><td style="text-align: right;">
3.1
</td><td style="text-align: right;">
3.4
</td><td style="text-align: right;">
17.0
</td><td style="text-align: right;">
0
</td><td style="text-align: right;">
0
</td><td style="text-align: right;">
3
</td><td style="text-align: right;">
2
</td></tr><tr><td style="text-align: left;">
Valiant
</td><td style="text-align: right;">
18.1
</td><td style="text-align: right;">
6
</td><td style="text-align: right;">
225
</td><td style="text-align: right;">
105
</td><td style="text-align: right;">
2.8
</td><td style="text-align: right;">
3.5
</td><td style="text-align: right;">
20.2
</td><td style="text-align: right;">
1
</td><td style="text-align: right;">
0
</td><td style="text-align: right;">
3
</td><td style="text-align: right;">
1
</td></tr></tbody></table>
<p>We’ll look specifically at the <code>mpg</code> variable (miles per gallon). Instead of writing <code>mean(mtcars$mpg)</code>, with a pipe you can write:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="C-tidyverse.html#cb15-1" aria-hidden="true" tabIndex="-1"></a>mtcars<span class="sc">$</span>mpg <span class="sc">|></span> <span class="fu">mean</span>()</span></code></pre></div>
<p>That’s not very useful yet, but when you start <strong>nesting</strong> functions, it gets better. Let’s set up a gallons-per-mile function.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="C-tidyverse.html#cb16-1" aria-hidden="true" tabIndex="-1"></a>gpm <span class="ot">&lt;-</span> <span class="cf">function</span> (mpg) {<span class="dv">1</span><span class="sc">/</span>mpg}</span></code></pre></div>
<p>Now we can compute GPM and output the number we want like so:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="C-tidyverse.html#cb17-1" aria-hidden="true" tabIndex="-1"></a><span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">gpm</span>(mtcars<span class="sc">$</span>mpg)), <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb17-2"><a href="C-tidyverse.html#cb17-2" aria-hidden="true" tabIndex="-1"></a><span class="co">#> [1] 0.05</span></span></code></pre></div>
<div id="island_2"><div class="box exercises"><div class="Collapsible"><span id="collapsible-trigger-1662960241486" class="Collapsible__trigger is-closed" aria-expanded="false" aria-disabled="false" aria-controls="collapsible-content-1662960241486" role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="pen-ruler" class="svg-inline--fa fa-pen-ruler " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M469.3 19.3l23.4 23.4c25 25 25 65.5 0 90.5l-56.4 56.4L322.3 75.7l56.4-56.4c25-25 65.5-25 90.5 0zM44.9 353.2L299.7 98.3 413.7 212.3 158.8 467.1c-6.7 6.7-15.1 11.6-24.2 14.2l-104 29.7c-8.4 2.4-17.4 .1-23.6-6.1s-8.5-15.2-6.1-23.6l29.7-104c2.6-9.2 7.5-17.5 14.2-24.2zM249.4 103.4L103.4 249.4 16 161.9c-18.7-18.7-18.7-49.1 0-67.9L94.1 16c18.7-18.7 49.1-18.7 67.9 0l19.8 19.8c-.3 .3-.7 .6-1 .9l-64 64c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l64-64c.3-.3 .6-.7 .9-1l45.1 45.1zM408.6 262.6l45.1 45.1c-.3 .3-.7 .6-1 .9l-64 64c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l64-64c.3-.3 .6-.7 .9-1L496 350.1c18.7 18.7 18.7 49.1 0 67.9L417.9 496c-18.7 18.7-49.1 18.7-67.9 0l-87.4-87.4L408.6 262.6z"></path></svg>Exercises<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angles-down" class="svg-inline--fa fa-angles-down " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M246.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 402.7 361.4 265.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-160 160zm160-352l-160 160c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 210.7 361.4 73.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3z"></path></svg></span><div id="collapsible-content-1662960241486" class="Collapsible__contentOuter" style="height: 0px; -webkit-transition: height 300ms ease; ms-transition: height 300ms ease; transition: height 300ms ease; overflow: hidden;" role="region" aria-labelledby="collapsible-trigger-1662960241486"><div class="Collapsible__contentInner">
<p>Write <code>round(mean(gpm(mtcars$mpg)), digits = 2)</code> with pipes.</p>
</div></div></div></div></div>
<p>Reading <code>round(mean(gpm(mtcars$mpg)))</code> out loud involves reading from the center outwards. In contrast, the piped version can be read from left to right, top to bottom. That’s what pipes are for: they let you write strings of functions so that they are readable and distinct. We’ll be doing a lot of piping of functions with multiple arguments later, and it will really help keep our syntax simple.</p>
</div>
<div id="tidy-data-analysis" class="section level2" number="20.2">
<h2><span class="header-section-number">C.2</span> Tidy data analysis</h2>
<p>Next we are going to put the pipe into action in our analysis of a real dataset. Here are the raw data from <span class="citation">Stiller et al. (<a href="#ref-stiller2015" role="doc-biblioref">2015</a>)</span>, a simple developmental language study that we can use as our example. In that study, children met a puppet named “Furble.” Furble would show them three pictures, e.g. face, face with glasses, face with hat and glasses and would say “my friend has glasses.” They then had to choose which face was Furble’s friend. (The prediction was that they’d choose <em>glasses and not a hat</em>, indicating that they’d made a correct pragmatic inference). In the control condition, Furble just mumbled, so the expectation was that children would pick at chance. Figure <a href="C-tidyverse.html#fig:tidyverse-furble">C.1</a> shows the stimuli.</p>
<p>
<span class="marginnote shownote">
<span style="display: block;" id="fig:tidyverse-furble"></span>
<img src="images/tidyverse/furble.png" alt="Example stimulus from Stiller, Goodman, &amp; Frank (2015)." width="\linewidth" />
Figure C.1: Example stimulus from Stiller, Goodman, &amp; Frank (2015).
</span>
</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="C-tidyverse.html#cb18-1" aria-hidden="true" tabIndex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;images/tidyverse/furble.png&quot;</span>)</span></code></pre></div>
<p>The data from <span class="citation">Stiller et al. (<a href="#ref-stiller2015" role="doc-biblioref">2015</a>)</span> are tidy: each row describes a single trial, each column describes some aspect of that trial, including their id (<code>subid</code>), age (<code>age</code>), condition (<code>condition</code> - “label” is the experimental condition, “No Label” is the control), item (<code>item</code> - which thing Furble was trying to find).</p>
<p>We are going to manipulate these data using “verbs” from the tidyverse. We’ll only look at four verbs today, but there are many other useful ones. Here are the four most common ones in many data analytic workflows:</p>
<ul>
<li><code>filter</code> - remove rows by some logical condition</li>
<li><code>mutate</code> - create new columns</li>
<li><code>group_by</code> - group the data into subsets by some column</li>
<li><code>summarize</code> - apply some function over columns in each group</li>
</ul>
<div id="exploring-and-characterizing-the-dataset" class="section level3" number="20.2.1">
<h3><span class="header-section-number">C.2.1</span> Exploring and characterizing the dataset</h3>
<p>First we will read in the data. Note that we are using <code>read_csv</code> from <code>tidyverse</code>. This function is a bit faster than <code>read.csv</code> in base R and has better defaults.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="C-tidyverse.html#cb19-1" aria-hidden="true" tabIndex="-1"></a>sgf <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/langcog/experimentology/main/data/tidyverse/stiller_scales_data.csv&quot;</span>)</span></code></pre></div>
<p>It’s a very good idea to inspect your data before you start any analysis. One common method is using <code>summary</code>, which provides summaries of each variable. We recommend interactive tools like <code>View</code> or <code>DT::datatable</code>. This latter is very helpful in knitted R Markdown reports, but does require installing the <code>DT</code> package from CRAN.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="C-tidyverse.html#cb20-1" aria-hidden="true" tabIndex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(sgf)</span></code></pre></div>
<div id="htmlwidget-30e4409849e39179307f" style="width: 100%; height: auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-30e4409849e39179307f">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588"],["M22","M22","M22","M22","T22","T22","T22","T22","T17","T17","T17","T17","M3","M3","M3","M3","T19","T19","T19","T19","T20","T20","T20","T20","T21","T21","T21","T21","M26","M26","M26","M26","T18","T18","T18","T18","T12","T12","T12","T12","T16","T16","T16","T16","T7","T7","T7","T7","T9","T9","T9","T9","T5","T5","T5","T5","T14","T14","T14","T14","T2","T2","T2","T2","T15","T15","T15","T15","M13","M13","M13","M13","M12","M12","M12","M12","T13","T13","T13","T13","T8","T8","T8","T8","T1","T1","T1","T1","M15","M15","M15","M15","T11","T11","T11","T11","T10","T10","T10","T10","T3","T3","T3","T3","T6","T6","T6","T6","M32","M32","M32","M32","M1","M1","M1","M1","C16","C16","C16","C16","T4","T4","T4","T4","C17","C17","C17","C17","C6","C6","C6","C6","M10","M10","M10","M10","M31","M31","M31","M31","C3","C3","C3","C3","C10","C10","C10","C10","M18","M18","M18","M18","M16","M16","M16","M16","M23","M23","M23","M23","C7","C7","C7","C7","C12","C12","C12","C12","C15","C15","C15","C15","M29","M29","M29","M29","C20","C20","C20","C20","M11","M11","M11","M11","C9","C9","C9","C9","C24","C24","C24","C24","C22","C22","C22","C22","C8","C8","C8","C8","M4","M4","M4","M4","M6","M6","M6","M6","C19","C19","C19","C19","C1","C1","C1","C1","M19","M19","M19","M19","C11","C11","C11","C11","M9","M9","M9","M9","M2","M2","M2","M2","C5","C5","C5","C5","M30","M30","M30","M30","C13","C13","C13","C13","C4","C4","C4","C4","C14","C14","C14","C14","M17","M17","M17","M17","C2","C2","C2","C2","C23","C23","C23","C23","M20","M20","M20","M20","M21","M21","M21","M21","C21","C21","C21","C21","M24","M24","M24","M24","M5","M5","M5","M5","M7","M7","M7","M7","M8","M8","M8","M8","C18","C18","C18","C18","M25","M25","M25","M25","MSCH47","MSCH47","MSCH47","MSCH47","MSCH50","MSCH50","MSCH50","MSCH50","MSCH51","MSCH51","MSCH51","MSCH51","MSCH44","MSCH44","MSCH44","MSCH44","MSCH52","MSCH52","MSCH52","MSCH52","MSCH38","MSCH38","MSCH38","MSCH38","MSCH43","MSCH43","MSCH43","MSCH43","MSCH49","MSCH49","MSCH49","MSCH49","MSCH45","MSCH45","MSCH45","MSCH45","MSCH42","MSCH42","MSCH42","MSCH42","MSCH53","MSCH53","MSCH53","MSCH53","SCH35","SCH35","SCH35","SCH35","MSCH40","MSCH40","MSCH40","MSCH40","SCH34","SCH34","SCH34","SCH34","SCH33","SCH33","SCH33","SCH33","MSCH41","MSCH41","MSCH41","MSCH41","SCH37","SCH37","SCH37","SCH37","SCH32","SCH32","SCH32","SCH32","SCH36","SCH36","SCH36","SCH36","SCH11","SCH12","SCH12","SCH12","SCH12","SCH18","SCH18","SCH18","SCH18","MSCH48","MSCH48","MSCH48","MSCH48","SCH25","SCH25","SCH25","SCH25","SCH31","SCH31","SCH31","SCH31","MSCH46","MSCH46","MSCH46","MSCH46","SCH11","SCH11","SCH11","SCH29","SCH29","SCH29","SCH29","MSCH39","MSCH39","MSCH39","MSCH39","SCH28","SCH28","SCH28","SCH28","SCH22","SCH22","SCH22","SCH22","SCH24","SCH24","SCH24","SCH24","SCH27","SCH27","SCH27","SCH27","SCH17","SCH17","SCH17","SCH17","SCH10","SCH10","SCH10","SCH10","SCH9","SCH9","SCH9","SCH9","SCH20","SCH20","SCH20","SCH20","SCH6","SCH6","SCH6","SCH6","SCH7","SCH7","SCH7","SCH7","SCH15","SCH15","SCH15","SCH15","SCH30","SCH30","SCH30","SCH30","SCH3","SCH3","SCH3","SCH3","SCH26","SCH26","SCH26","SCH26","SCH8","SCH8","SCH8","SCH8","SCH16","SCH16","SCH16","SCH16","SCH14","SCH14","SCH14","SCH14","SCH2","SCH2","SCH2","SCH2","SCH5","SCH5","SCH5","SCH5","SCH13","SCH13","SCH13","SCH13","SCH21","SCH21","SCH21","SCH21","SCH19","SCH19","SCH19","SCH19","SCH23","SCH23","SCH23","SCH23","SCH1","SCH1","SCH1","SCH1","MSCH66","MSCH66","MSCH66","MSCH66","MSCH67","MSCH67","MSCH67","MSCH67","MSCH68","MSCH68","MSCH68","MSCH68","MSCH69","MSCH69","MSCH69","MSCH69","MSCH70","MSCH70","MSCH70","MSCH70","MSCH71","MSCH71","MSCH71","MSCH71","MSCH72","MSCH72","MSCH72","MSCH72","MSCH73","MSCH73","MSCH73","MSCH73","MSCH74","MSCH74","MSCH74","MSCH74","MSCH75","MSCH75","MSCH75","MSCH75","MSCH76","MSCH76","MSCH76","MSCH76","MSCH77","MSCH77","MSCH77","MSCH77","MSCH78","MSCH78","MSCH78","MSCH78","MSCH79","MSCH79","MSCH79","MSCH79","MSCH80","MSCH80","MSCH80","MSCH80","MSCH81","MSCH81","MSCH81","MSCH81","MSCH82","MSCH82","MSCH82","MSCH82","MSCH83","MSCH83","MSCH83","MSCH83","MSCH84","MSCH84","MSCH84","MSCH84","MSCH85","MSCH85","MSCH85","MSCH85"],["faces","houses","pasta","beds","beds","faces","houses","pasta","pasta","faces","houses","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","beds","faces","houses","pasta","faces","houses","pasta","beds","faces","houses","pasta","beds","houses","faces","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","houses","faces","pasta","beds","faces","houses","pasta","beds","houses","beds","faces","pasta","faces","houses","pasta","beds","beds","faces","houses","pasta","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","beds","faces","houses","pasta","faces","beds","pasta","houses","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","beds","pasta","faces","houses","pasta","beds","houses","pasta","beds","faces","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","beds","faces","houses","pasta","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","beds","faces","houses","pasta","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","beds","faces","houses","pasta","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","beds","faces","houses","pasta","faces","houses","pasta","beds","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","faces","houses","pasta","beds","beds","pasta","houses","faces","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds","faces","houses","pasta","beds"],[1,1,0,0,0,0,1,1,0,0,0,0,0,1,1,1,0,0,1,1,1,1,0,1,1,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,1,0,1,1,1,0,0,0,0,1,0,1,1,1,0,1,1,1,0,1,0,0,1,1,0,0,1,0,0,1,1,0,1,0,1,0,0,0,1,1,1,0,1,1,1,0,0,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,1,1,1,0,0,1,1,0,1,0,0,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,0,0,1,1,0,1,1,1,0,0,0,1,1,0,1,1,0,1,0,0,1,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,0,0,1,1,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,0,0,1,0,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,0,1,1,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0],[2,2,2,2,2.13,2.13,2.13,2.13,2.32,2.32,2.32,2.32,2.38,2.38,2.38,2.38,2.47,2.47,2.47,2.47,2.5,2.5,2.5,2.5,2.58,2.58,2.58,2.58,2.59,2.59,2.59,2.59,2.61,2.61,2.61,2.61,2.72,2.72,2.72,2.72,2.73,2.73,2.73,2.73,2.74,2.74,2.74,2.74,2.79,2.79,2.79,2.79,2.8,2.8,2.8,2.8,2.83,2.83,2.83,2.83,2.83,2.83,2.83,2.83,2.85,2.85,2.85,2.85,2.88,2.88,2.88,2.88,2.88,2.88,2.88,2.88,2.89,2.89,2.89,2.89,2.91,2.91,2.91,2.91,2.95,2.95,2.95,2.95,2.98,2.98,2.98,2.98,2.99,2.99,2.99,2.99,3,3,3,3,3.09,3.09,3.09,3.09,3.1,3.1,3.1,3.1,3.19,3.19,3.19,3.19,3.2,3.2,3.2,3.2,3.22,3.22,3.22,3.22,3.24,3.24,3.24,3.24,3.25,3.25,3.25,3.25,3.26,3.26,3.26,3.26,3.28,3.28,3.28,3.28,3.3,3.3,3.3,3.3,3.46,3.46,3.46,3.46,3.46,3.46,3.46,3.46,3.46,3.46,3.46,3.46,3.5,3.5,3.5,3.5,3.52,3.52,3.52,3.52,3.55,3.55,3.55,3.55,3.56,3.56,3.56,3.56,3.59,3.59,3.59,3.59,3.72,3.72,3.72,3.72,3.75,3.75,3.75,3.75,3.82,3.82,3.82,3.82,3.82,3.82,3.82,3.82,3.85,3.85,3.85,3.85,3.92,3.92,3.92,3.92,3.92,3.92,3.92,3.92,3.96,3.96,3.96,3.96,4.5,4.5,4.5,4.5,4.14,4.14,4.14,4.14,4.16,4.16,4.16,4.16,4.16,4.16,4.16,4.16,4.22,4.22,4.22,4.22,4.26,4.26,4.26,4.26,4.28,4.28,4.28,4.28,4.29,4.29,4.29,4.29,4.33,4.33,4.33,4.33,4.38,4.38,4.38,4.38,4.55,4.55,4.55,4.55,4.57,4.57,4.57,4.57,4.58,4.58,4.58,4.58,4.6,4.6,4.6,4.6,4.62,4.62,4.62,4.62,4.64,4.64,4.64,4.64,4.64,4.64,4.64,4.64,4.73,4.73,4.73,4.73,4.82,4.82,4.82,4.82,4.84,4.84,4.84,4.84,4.89,4.89,4.89,4.89,4.89,4.89,4.89,4.89,4.95,4.95,4.95,4.95,4.96,4.96,4.96,4.96,2.01,2.01,2.01,2.01,2.03,2.03,2.03,2.03,2.07,2.07,2.07,2.07,2.25,2.25,2.25,2.25,2.5,2.5,2.5,2.5,2.59,2.59,2.59,2.59,2.71,2.71,2.71,2.71,2.88,2.88,2.88,2.88,2.9,2.9,2.9,2.9,2.93,2.93,2.93,2.93,2.99,2.99,2.99,2.99,3.02,3.02,3.02,3.02,3.02,3.02,3.02,3.02,3.06,3.06,3.06,3.06,3.06,3.06,3.06,3.06,3.18,3.18,3.18,3.18,3.27,3.27,3.27,3.27,3.27,3.27,3.27,3.27,3.33,3.33,3.33,3.33,3.41,3.41,3.41,3.41,3.41,3.45,3.45,3.45,3.45,3.5,3.5,3.5,3.5,3.54,3.54,3.54,3.54,3.71,3.71,3.71,3.71,3.76,3.76,3.76,3.76,3.82,3.82,3.82,3.83,3.83,3.83,3.83,3.93,3.93,3.94,3.94,4.02,4.02,4.02,4.02,4.02,4.02,4.02,4.02,4.07,4.07,4.07,4.07,4.09,4.09,4.09,4.09,4.25,4.25,4.25,4.25,4.32,4.32,4.32,4.32,4.37,4.37,4.37,4.37,4.39,4.39,4.39,4.39,4.41,4.41,4.41,4.41,4.41,4.41,4.41,4.41,4.42,4.42,4.42,4.42,4.44,4.44,4.44,4.44,4.47,4.47,4.47,4.47,4.47,4.47,4.47,4.47,4.52,4.52,4.52,4.52,4.55,4.55,4.55,4.55,4.58,4.58,4.58,4.58,4.61,4.61,4.61,4.61,4.61,4.61,4.61,4.61,4.75,4.75,4.75,4.75,4.76,4.76,4.76,4.76,4.79,4.79,4.79,4.79,4.82,4.82,4.82,4.82,4.82,4.82,4.82,4.82,3.5,3.5,3.5,3.5,3.24,3.24,3.24,3.24,3.94,3.94,3.94,3.94,2.72,2.72,2.72,2.72,2.31,2.31,2.31,2.31,3.14,3.14,3.14,3.14,3.72,3.72,3.72,3.72,3.1,3.1,3.1,3.1,2.34,2.34,2.34,2.34,3.67,3.67,3.67,3.66,2.58,2.58,2.58,2.58,2.55,2.55,2.55,2.55,2.43,2.43,2.43,2.43,2.7,2.7,2.7,2.7,2.76,2.76,2.76,2.76,2.84,2.84,2.84,2.84,2.46,2.46,2.46,2.46,2.37,2.37,2.37,2.37,2.83,2.83,2.83,2.83,2.69,2.69,2.69,2.69],["Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label","No Label"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>subid<\/th>\n      <th>item<\/th>\n      <th>correct<\/th>\n      <th>age<\/th>\n      <th>condition<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Now that we have examined the data, let’s go ahead and start manipulating it.</p>
</div>
<div id="filtering-and-mutating" class="section level3" number="20.2.2">
<h3><span class="header-section-number">C.2.2</span> Filtering and mutating</h3>
<p>There are lots of reasons you might want to remove rows from your dataset, including getting rid of outliers, selecting subpopulations, and so forth. For this purpose, <code>filter</code> is a verb (a function in the tidyverse) that takes a data frame as its first argument, and then as its second takes the condition you want to filter on.</p>
<p>So if you wanted to look only at two year olds, you could do this:<label for="tufte-sn-286" class="margin-toggle sidenote-number">286</label><input type="checkbox" id="tufte-sn-286" class="margin-toggle" /><span class="sidenote"><span class="sidenote-number">286</span> Filter can take a either a single logical condition or a set of conditions, so you could also write <code>filter(sgf, age > 2 &amp; age &lt; 3)</code>.s</span></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="C-tidyverse.html#cb21-1" aria-hidden="true" tabIndex="-1"></a><span class="fu">filter</span>(sgf, age <span class="sc">>=</span><span class="dv">2</span>, age <span class="sc">&lt;</span> <span class="dv">3</span>)</span></code></pre></div>
<p>Here we’ve given <code>sgf</code> as the first argument to <code>filter</code>. But our general strategy is going to be using pipes. The way this works is that:</p>
<ul>
<li><code>tidyverse</code> verbs always take the data frame as their first argument, and</li>
<li>because pipes pull out the first argument, the data frame just gets passed through successive operations</li>
<li>so you can read a pipe chain as “take this data frame and first do this, then do this, then do that.”</li>
</ul>
<p>This piping thing is essentially the huge insight of the tidyverse: you can chain verbs into readable and efficient sequences of operations over dataframes, provided 1) the verbs all have the same syntax (which they do) and 2) the data all have the same structure (which they do if they are tidy).</p>
<p>So here’s our rewritten filter expression:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="C-tidyverse.html#cb22-1" aria-hidden="true" tabIndex="-1"></a>sgf <span class="sc">|></span></span>
<span id="cb22-2"><a href="C-tidyverse.html#cb22-2" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">>=</span> <span class="dv">2</span>, age <span class="sc">&lt;</span> <span class="dv">3</span>)</span></code></pre></div>
<p>which yields this:</p>
<pre><code>#> # A tibble: 192 × 5
#>    subid item   correct   age condition
#>    &lt;chr> &lt;chr>    &lt;dbl> &lt;dbl> &lt;chr>    
#>  1 M22   faces        1  2    Label    
#>  2 M22   houses       1  2    Label    
#>  3 M22   pasta        0  2    Label    
#>  4 M22   beds         0  2    Label    
#>  5 T22   beds         0  2.13 Label    
#>  6 T22   faces        0  2.13 Label    
#>  7 T22   houses       1  2.13 Label    
#>  8 T22   pasta        1  2.13 Label    
#>  9 T17   pasta        0  2.32 Label    
#> 10 T17   faces        0  2.32 Label    
#> # … with 182 more rows</code></pre>
<p>Adding columns to data frames is usually done to compute some kind of derived variable. <code>mutate</code> is the verb for these situations – it allows you to add a column to your dataset (or change one that already exists). Let’s add a discrete age group factor to our dataset.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="C-tidyverse.html#cb24-1" aria-hidden="true" tabIndex="-1"></a>sgf <span class="ot">&lt;-</span> sgf <span class="sc">|></span></span>
<span id="cb24-2"><a href="C-tidyverse.html#cb24-2" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_group =</span> <span class="fu">cut</span>(age, <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<div id="island_3"><div class="box exercises"><div class="Collapsible"><span id="collapsible-trigger-1662960241487" class="Collapsible__trigger is-closed" aria-expanded="false" aria-disabled="false" aria-controls="collapsible-content-1662960241487" role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="pen-ruler" class="svg-inline--fa fa-pen-ruler " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M469.3 19.3l23.4 23.4c25 25 25 65.5 0 90.5l-56.4 56.4L322.3 75.7l56.4-56.4c25-25 65.5-25 90.5 0zM44.9 353.2L299.7 98.3 413.7 212.3 158.8 467.1c-6.7 6.7-15.1 11.6-24.2 14.2l-104 29.7c-8.4 2.4-17.4 .1-23.6-6.1s-8.5-15.2-6.1-23.6l29.7-104c2.6-9.2 7.5-17.5 14.2-24.2zM249.4 103.4L103.4 249.4 16 161.9c-18.7-18.7-18.7-49.1 0-67.9L94.1 16c18.7-18.7 49.1-18.7 67.9 0l19.8 19.8c-.3 .3-.7 .6-1 .9l-64 64c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l64-64c.3-.3 .6-.7 .9-1l45.1 45.1zM408.6 262.6l45.1 45.1c-.3 .3-.7 .6-1 .9l-64 64c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l64-64c.3-.3 .6-.7 .9-1L496 350.1c18.7 18.7 18.7 49.1 0 67.9L417.9 496c-18.7 18.7-49.1 18.7-67.9 0l-87.4-87.4L408.6 262.6z"></path></svg>Exercises<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angles-down" class="svg-inline--fa fa-angles-down " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M246.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 402.7 361.4 265.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-160 160zm160-352l-160 160c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 210.7 361.4 73.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3z"></path></svg></span><div id="collapsible-content-1662960241487" class="Collapsible__contentOuter" style="height: 0px; -webkit-transition: height 300ms ease; ms-transition: height 300ms ease; transition: height 300ms ease; overflow: hidden;" role="region" aria-labelledby="collapsible-trigger-1662960241487"><div class="Collapsible__contentInner">
<p>Filter the <code>sgf</code> data so that only the “face” trial in the “Label” condition is present.</p>
</div></div></div></div></div>
</div>
<div id="standard-descriptives-using-summarise-and-group_by" class="section level3" number="20.2.3">
<h3><span class="header-section-number">C.2.3</span> Standard descriptives using <code>summarise</code> and <code>group_by</code></h3>
<p>We typically describe datasets at the level of participants, not trials. We need two verbs to get a summary at the level of participants: <code>group_by</code> and <code>summarise</code> (kiwi spelling). Let’s start with grouping:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="C-tidyverse.html#cb25-1" aria-hidden="true" tabIndex="-1"></a>sgf <span class="sc">|></span></span>
<span id="cb25-2"><a href="C-tidyverse.html#cb25-2" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">group_by</span>(age_group) </span></code></pre></div>
<p>Grouping a dataframe alone doesn’t do much. All it does is add a grouping marker.</p>
<p>What <code>summarise</code> does is to <em>apply a function</em> to a part of the dataset to create a new summary dataset. Where these two verbs shine is in combination, though. Because <code>summarise</code> applies functions to columns in your <em>grouped data</em>, not just to the whole dataset!</p>
<p>You may at some point have done this kind of group level summary by writing code that looked schematically like this:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="C-tidyverse.html#cb26-1" aria-hidden="true" tabIndex="-1"></a>foo <span class="ot">&lt;-</span> <span class="fu">initialize_the_thing_being_bound</span>()</span>
<span id="cb26-2"><a href="C-tidyverse.html#cb26-2" aria-hidden="true" tabIndex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(sgf<span class="sc">$</span>item))) {</span>
<span id="cb26-3"><a href="C-tidyverse.html#cb26-3" aria-hidden="true" tabIndex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(sgf<span class="sc">$</span>condition))) {</span>
<span id="cb26-4"><a href="C-tidyverse.html#cb26-4" aria-hidden="true" tabIndex="-1"></a>    this_data <span class="ot">&lt;-</span> sgf[sgf<span class="sc">$</span>item <span class="sc">==</span> <span class="fu">unique</span>(sgf<span class="sc">$</span>item)[i] <span class="sc">&amp;</span></span>
<span id="cb26-5"><a href="C-tidyverse.html#cb26-5" aria-hidden="true" tabIndex="-1"></a>                      sgf<span class="sc">$</span>condition <span class="sc">==</span> <span class="fu">unique</span>(sgf<span class="sc">$</span>condition)[j],]</span>
<span id="cb26-6"><a href="C-tidyverse.html#cb26-6" aria-hidden="true" tabIndex="-1"></a>    <span class="fu">do_a_thing</span>(this_data)</span>
<span id="cb26-7"><a href="C-tidyverse.html#cb26-7" aria-hidden="true" tabIndex="-1"></a>    <span class="fu">bind_together_somehow</span>(this_data)</span>
<span id="cb26-8"><a href="C-tidyverse.html#cb26-8" aria-hidden="true" tabIndex="-1"></a>  }</span>
<span id="cb26-9"><a href="C-tidyverse.html#cb26-9" aria-hidden="true" tabIndex="-1"></a>}</span></code></pre></div>
<p><strong>Don’t do that!</strong> This kind of code is very clunky and has all sorts of ways that it could go wrong. It’s also very slow to execute. Instead, here’s the tidyverse way:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="C-tidyverse.html#cb27-1" aria-hidden="true" tabIndex="-1"></a>sgf <span class="sc">|></span></span>
<span id="cb27-2"><a href="C-tidyverse.html#cb27-2" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">group_by</span>(age_group, condition) <span class="sc">|></span></span>
<span id="cb27-3"><a href="C-tidyverse.html#cb27-3" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_correct =</span> <span class="fu">mean</span>(correct))</span></code></pre></div>
<p>That code yields this output:</p>
<pre><code>#> # A tibble: 6 × 3
#> # Groups:   age_group [3]
#>   age_group condition mean_correct
#>   &lt;fct>     &lt;chr>            &lt;dbl>
#> 1 [2,3]     Label            0.57 
#> 2 [2,3]     No Label         0.240
#> 3 (3,4]     Label            0.712
#> 4 (3,4]     No Label         0.240
#> 5 (4,5]     Label            0.771
#> 6 (4,5]     No Label         0.125</code></pre>
<p>Note the syntax here: <code>summarise</code> takes multiple <code>new_column_name = function_to_be_applied_to_data(data_column)</code> entries in a list. Using this syntax, we can create more elaborate summary datasets also:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="C-tidyverse.html#cb29-1" aria-hidden="true" tabIndex="-1"></a>sgf_means <span class="ot">&lt;-</span> sgf <span class="sc">|></span></span>
<span id="cb29-2"><a href="C-tidyverse.html#cb29-2" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">group_by</span>(age_group, condition) <span class="sc">|></span></span>
<span id="cb29-3"><a href="C-tidyverse.html#cb29-3" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_correct =</span> <span class="fu">mean</span>(correct), </span>
<span id="cb29-4"><a href="C-tidyverse.html#cb29-4" aria-hidden="true" tabIndex="-1"></a>            <span class="at">sd_correct =</span> <span class="fu">sd</span>(correct),</span>
<span id="cb29-5"><a href="C-tidyverse.html#cb29-5" aria-hidden="true" tabIndex="-1"></a>            <span class="at">n_observations =</span> <span class="fu">length</span>(subid))</span></code></pre></div>
<p>These summary data are typically very useful for plotting or displaying as tables, like this:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="C-tidyverse.html#cb30-1" aria-hidden="true" tabIndex="-1"></a><span class="fu">ggplot</span>(sgf_means, </span>
<span id="cb30-2"><a href="C-tidyverse.html#cb30-2" aria-hidden="true" tabIndex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">y =</span> mean_correct, </span>
<span id="cb30-3"><a href="C-tidyverse.html#cb30-3" aria-hidden="true" tabIndex="-1"></a>           <span class="at">col =</span> condition, <span class="at">group =</span> condition)) <span class="sc">+</span> </span>
<span id="cb30-4"><a href="C-tidyverse.html#cb30-4" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb30-5"><a href="C-tidyverse.html#cb30-5" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb30-6"><a href="C-tidyverse.html#cb30-6" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb30-7"><a href="C-tidyverse.html#cb30-7" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Age group (years)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb30-8"><a href="C-tidyverse.html#cb30-8" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Proportion correct&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display: block;" id="fig:tidyverse-plotting"></span>
<p class="caption marginnote shownote">
Figure C.2: Visualization of Stiller, Goodman, &amp; Frank (2015) data after grouping and summary.
</p>
<img src="experimentology_files/figure-html/tidyverse-plotting-1.png" alt="Visualization of Stiller, Goodman, &amp; Frank (2015) data after grouping and summary." width="\linewidth" />
</div>
</div>
<div id="more-advanced-combos" class="section level3" number="20.2.4">
<h3><span class="header-section-number">C.2.4</span> More advanced combos</h3>
<p>A very common workflow in repeated measures experiments is to calculate participant-level means, and <em>then</em> compute the mean and variance and confidence intervals) across participants. This workflow gives you variances and confidence intervals that reflect variability across participants, rather than across trials. To execute it though, you need to <code>group_by</code> and <code>summarise</code> twice: once to get participant averages, and once to get the grand average. Here’s the pattern:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="C-tidyverse.html#cb31-1" aria-hidden="true" tabIndex="-1"></a>sgf_means <span class="ot">&lt;-</span> sgf <span class="sc">|></span></span>
<span id="cb31-2"><a href="C-tidyverse.html#cb31-2" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">group_by</span>(age_group, condition, subid) <span class="sc">|></span></span>
<span id="cb31-3"><a href="C-tidyverse.html#cb31-3" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_correct =</span> <span class="fu">mean</span>(correct)) <span class="sc">|></span></span>
<span id="cb31-4"><a href="C-tidyverse.html#cb31-4" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">group_by</span>(age_group, condition) <span class="sc">|></span></span>
<span id="cb31-5"><a href="C-tidyverse.html#cb31-5" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sd_correct =</span> <span class="fu">sd</span>(mean_correct), </span>
<span id="cb31-6"><a href="C-tidyverse.html#cb31-6" aria-hidden="true" tabIndex="-1"></a>            <span class="at">n_obs =</span> <span class="fu">length</span>(mean_correct),</span>
<span id="cb31-7"><a href="C-tidyverse.html#cb31-7" aria-hidden="true" tabIndex="-1"></a>            <span class="at">mean_correct =</span> <span class="fu">mean</span>(mean_correct))</span></code></pre></div>
<p>Here’s a split-up version of this recipe that will allow you to compute confidence intervals.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="C-tidyverse.html#cb32-1" aria-hidden="true" tabIndex="-1"></a>sgf_sub_means <span class="ot">&lt;-</span> sgf <span class="sc">|></span></span>
<span id="cb32-2"><a href="C-tidyverse.html#cb32-2" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">group_by</span>(age_group, condition, subid) <span class="sc">|></span></span>
<span id="cb32-3"><a href="C-tidyverse.html#cb32-3" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_correct =</span> <span class="fu">mean</span>(correct)) </span>
<span id="cb32-4"><a href="C-tidyverse.html#cb32-4" aria-hidden="true" tabIndex="-1"></a></span>
<span id="cb32-5"><a href="C-tidyverse.html#cb32-5" aria-hidden="true" tabIndex="-1"></a>sgf_group_means <span class="ot">&lt;-</span> sgf_sub_means <span class="sc">|></span></span>
<span id="cb32-6"><a href="C-tidyverse.html#cb32-6" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">group_by</span>(age_group, condition) <span class="sc">|></span></span>
<span id="cb32-7"><a href="C-tidyverse.html#cb32-7" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sd_correct =</span> <span class="fu">sd</span>(mean_correct), </span>
<span id="cb32-8"><a href="C-tidyverse.html#cb32-8" aria-hidden="true" tabIndex="-1"></a>            <span class="at">n_obs =</span> <span class="fu">length</span>(mean_correct),</span>
<span id="cb32-9"><a href="C-tidyverse.html#cb32-9" aria-hidden="true" tabIndex="-1"></a>            <span class="at">sem =</span> sd_correct <span class="sc">/</span> <span class="fu">sqrt</span>(n_obs),</span>
<span id="cb32-10"><a href="C-tidyverse.html#cb32-10" aria-hidden="true" tabIndex="-1"></a>            <span class="at">ci =</span> sem <span class="sc">*</span> <span class="fl">1.96</span>,</span>
<span id="cb32-11"><a href="C-tidyverse.html#cb32-11" aria-hidden="true" tabIndex="-1"></a>            <span class="at">mean_correct =</span> <span class="fu">mean</span>(mean_correct))</span></code></pre></div>
<p>Now we can augment our prior plot by adding both the means and confidence intervals as well as the raw data.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="C-tidyverse.html#cb33-1" aria-hidden="true" tabIndex="-1"></a><span class="fu">ggplot</span>(sgf_group_means, </span>
<span id="cb33-2"><a href="C-tidyverse.html#cb33-2" aria-hidden="true" tabIndex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">y =</span> mean_correct, </span>
<span id="cb33-3"><a href="C-tidyverse.html#cb33-3" aria-hidden="true" tabIndex="-1"></a>           <span class="at">col =</span> condition, <span class="at">group =</span> condition)) <span class="sc">+</span> </span>
<span id="cb33-4"><a href="C-tidyverse.html#cb33-4" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb33-5"><a href="C-tidyverse.html#cb33-5" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> mean_correct <span class="sc">-</span> ci, </span>
<span id="cb33-6"><a href="C-tidyverse.html#cb33-6" aria-hidden="true" tabIndex="-1"></a>                      <span class="at">ymax =</span> mean_correct <span class="sc">+</span> ci)) <span class="sc">+</span></span>
<span id="cb33-7"><a href="C-tidyverse.html#cb33-7" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">data =</span> sgf_sub_means, <span class="at">alpha =</span> .<span class="dv">3</span>, </span>
<span id="cb33-8"><a href="C-tidyverse.html#cb33-8" aria-hidden="true" tabIndex="-1"></a>              <span class="at">width =</span> .<span class="dv">1</span>, <span class="at">height =</span> .<span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb33-9"><a href="C-tidyverse.html#cb33-9" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb33-10"><a href="C-tidyverse.html#cb33-10" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Age group (years)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb33-11"><a href="C-tidyverse.html#cb33-11" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Proportion correct&quot;</span>) <span class="sc">+</span> </span>
<span id="cb33-12"><a href="C-tidyverse.html#cb33-12" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<div class="figure"><span style="display: block;" id="fig:tidyverse-cis-plot"></span>
<p class="caption marginnote shownote">
Figure C.3: Visualization of Stiller, Goodman, &amp; Frank (2015) data after grouping and summary, now with participant-level 95% confidence intervals and visualization of individual participant means.
</p>
<img src="experimentology_files/figure-html/tidyverse-cis-plot-1.png" alt="Visualization of Stiller, Goodman, &amp; Frank (2015) data after grouping and summary, now with participant-level 95\% confidence intervals and visualization of individual participant means." width="\linewidth" />
</div>
<div id="island_4"><div class="box exercises"><div class="Collapsible"><span id="collapsible-trigger-1662960241488" class="Collapsible__trigger is-closed" aria-expanded="false" aria-disabled="false" aria-controls="collapsible-content-1662960241488" role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="pen-ruler" class="svg-inline--fa fa-pen-ruler " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M469.3 19.3l23.4 23.4c25 25 25 65.5 0 90.5l-56.4 56.4L322.3 75.7l56.4-56.4c25-25 65.5-25 90.5 0zM44.9 353.2L299.7 98.3 413.7 212.3 158.8 467.1c-6.7 6.7-15.1 11.6-24.2 14.2l-104 29.7c-8.4 2.4-17.4 .1-23.6-6.1s-8.5-15.2-6.1-23.6l29.7-104c2.6-9.2 7.5-17.5 14.2-24.2zM249.4 103.4L103.4 249.4 16 161.9c-18.7-18.7-18.7-49.1 0-67.9L94.1 16c18.7-18.7 49.1-18.7 67.9 0l19.8 19.8c-.3 .3-.7 .6-1 .9l-64 64c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l64-64c.3-.3 .6-.7 .9-1l45.1 45.1zM408.6 262.6l45.1 45.1c-.3 .3-.7 .6-1 .9l-64 64c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l64-64c.3-.3 .6-.7 .9-1L496 350.1c18.7 18.7 18.7 49.1 0 67.9L417.9 496c-18.7 18.7-49.1 18.7-67.9 0l-87.4-87.4L408.6 262.6z"></path></svg>Exercises<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angles-down" class="svg-inline--fa fa-angles-down " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M246.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 402.7 361.4 265.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-160 160zm160-352l-160 160c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 210.7 361.4 73.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3z"></path></svg></span><div id="collapsible-content-1662960241488" class="Collapsible__contentOuter" style="height: 0px; -webkit-transition: height 300ms ease; ms-transition: height 300ms ease; transition: height 300ms ease; overflow: hidden;" role="region" aria-labelledby="collapsible-trigger-1662960241488"><div class="Collapsible__contentInner">
<p>Challenge: Adapt the code above to split the data by item, rather than by age group. For an extra challenge, plot the data this way as well.</p>
</div></div></div></div></div>
</div>
</div>
<div id="getting-your-data-tidy" class="section level2" number="20.3">
<h2><span class="header-section-number">C.3</span> Getting your data tidy</h2>
<p>We’ve now shown you some of the very nice things you can do once you have tidy data! But how do you get your data to be tidy?</p>
<p>Psychological data often comes in two flavors: <em>long</em> and <em>wide</em> data. Long form data is <em>tidy</em>, but that format is less common. It’s much more common to get <em>wide</em> data, in which every row is a case (e.g., a subject), and each column is a variable. In this format multiple trials (observations) are stored as columns. Wide data can be organized a bunch of ways, but the most common might be to have subjects as rows and trials as columns.</p>
<p>For example, let’s take a look at a wide version of the <code>sgf</code> dataset above.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="C-tidyverse.html#cb34-1" aria-hidden="true" tabIndex="-1"></a>sgf_wide <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/langcog/experimentology/main/data/tidyverse/sgf_wide.csv&quot;</span>)</span></code></pre></div>
<p>Here it is:</p>
<pre><code>#> # A tibble: 150 × 8
#>    subid   age condition age_group  beds faces houses pasta
#>    &lt;chr> &lt;dbl> &lt;chr>     &lt;chr>     &lt;dbl> &lt;dbl>  &lt;dbl> &lt;dbl>
#>  1 C1     4.16 Label     (4,5]         1     1      1     1
#>  2 C10    3.46 Label     (3,4]         1     0      0     1
#>  3 C11    4.22 Label     (4,5]         1     1      0     1
#>  4 C12    3.56 Label     (3,4]         1     1      0     1
#>  5 C13    4.38 Label     (4,5]         1     0      1     0
#>  6 C14    4.57 Label     (4,5]         1     1      1     0
#>  7 C15    3.59 Label     (3,4]         1     1      1     1
#>  8 C16    3.22 Label     (3,4]         1     0      0     1
#>  9 C17    3.25 Label     (3,4]         0     1      0     1
#> 10 C18    4.95 Label     (4,5]         1     0      1     1
#> # … with 140 more rows</code></pre>
<p>The two main verbs for tidying are <code>pivot_longer</code> and <code>pivot_wider</code>. There are lots of others in the <code>tidyr</code> package (for example, if you want to <code>separate</code> columns), but we won’t cover those here.</p>
<p>Here, we’ll just show how to use <code>pivot_longer</code> to make the data tidy. We’ll try to make a single column called <code>item</code> and a single column called <code>correct</code> rather than having four different columns, one for each item. This is the key tricky of pivoting to longer form data – you need to imagine what the “missing label” is that unifies all the columns you are making longer.</p>
<p>Specifically, <code>pivot_longer</code> takes three arguments:</p>
<ul>
<li>A <code>tidyselect</code> way of getting columns – the columns you want to make longer. You can select them by name (e.g. <code>beds, faces, houses, pasta</code>), you can use numbers (e.g., <code>5:8</code>), or you can use markers like <code>starts_with(...)</code>.</li>
<li>A <code>names_to</code> argument. this argument is the <strong>name of the column names</strong>. In this case, the column names are items, so the “missing label” for them is <code>item</code>.</li>
<li>A <code>values_to</code> argument – the name of the thing in each column, in this case, the accuracy of the response (<code>correct</code>).</li>
</ul>
<p>Let’s try it:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="C-tidyverse.html#cb36-1" aria-hidden="true" tabIndex="-1"></a>sgf_wide <span class="sc">|></span> </span>
<span id="cb36-2"><a href="C-tidyverse.html#cb36-2" aria-hidden="true" tabIndex="-1"></a>  <span class="fu">pivot_longer</span>(beds<span class="sc">:</span>pasta, </span>
<span id="cb36-3"><a href="C-tidyverse.html#cb36-3" aria-hidden="true" tabIndex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;item&quot;</span>, </span>
<span id="cb36-4"><a href="C-tidyverse.html#cb36-4" aria-hidden="true" tabIndex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;correct&quot;</span>)</span>
<span id="cb36-5"><a href="C-tidyverse.html#cb36-5" aria-hidden="true" tabIndex="-1"></a><span class="co">#> # A tibble: 600 × 6</span></span>
<span id="cb36-6"><a href="C-tidyverse.html#cb36-6" aria-hidden="true" tabIndex="-1"></a><span class="co">#>    subid   age condition age_group item   correct</span></span>
<span id="cb36-7"><a href="C-tidyverse.html#cb36-7" aria-hidden="true" tabIndex="-1"></a><span class="co">#>    &lt;chr> &lt;dbl> &lt;chr>     &lt;chr>     &lt;chr>    &lt;dbl></span></span>
<span id="cb36-8"><a href="C-tidyverse.html#cb36-8" aria-hidden="true" tabIndex="-1"></a><span class="co">#>  1 C1     4.16 Label     (4,5]     beds         1</span></span>
<span id="cb36-9"><a href="C-tidyverse.html#cb36-9" aria-hidden="true" tabIndex="-1"></a><span class="co">#>  2 C1     4.16 Label     (4,5]     faces        1</span></span>
<span id="cb36-10"><a href="C-tidyverse.html#cb36-10" aria-hidden="true" tabIndex="-1"></a><span class="co">#>  3 C1     4.16 Label     (4,5]     houses       1</span></span>
<span id="cb36-11"><a href="C-tidyverse.html#cb36-11" aria-hidden="true" tabIndex="-1"></a><span class="co">#>  4 C1     4.16 Label     (4,5]     pasta        1</span></span>
<span id="cb36-12"><a href="C-tidyverse.html#cb36-12" aria-hidden="true" tabIndex="-1"></a><span class="co">#>  5 C10    3.46 Label     (3,4]     beds         1</span></span>
<span id="cb36-13"><a href="C-tidyverse.html#cb36-13" aria-hidden="true" tabIndex="-1"></a><span class="co">#>  6 C10    3.46 Label     (3,4]     faces        0</span></span>
<span id="cb36-14"><a href="C-tidyverse.html#cb36-14" aria-hidden="true" tabIndex="-1"></a><span class="co">#>  7 C10    3.46 Label     (3,4]     houses       0</span></span>
<span id="cb36-15"><a href="C-tidyverse.html#cb36-15" aria-hidden="true" tabIndex="-1"></a><span class="co">#>  8 C10    3.46 Label     (3,4]     pasta        1</span></span>
<span id="cb36-16"><a href="C-tidyverse.html#cb36-16" aria-hidden="true" tabIndex="-1"></a><span class="co">#>  9 C11    4.22 Label     (4,5]     beds         1</span></span>
<span id="cb36-17"><a href="C-tidyverse.html#cb36-17" aria-hidden="true" tabIndex="-1"></a><span class="co">#> 10 C11    4.22 Label     (4,5]     faces        1</span></span>
<span id="cb36-18"><a href="C-tidyverse.html#cb36-18" aria-hidden="true" tabIndex="-1"></a><span class="co">#> # … with 590 more rows</span></span></code></pre></div>
<p>We can compare this data frame to <code>sgf</code> and see that we’ve recovered the original long form.</p>
<div id="island_5"><div class="box exercises"><div class="Collapsible"><span id="collapsible-trigger-1662960241490" class="Collapsible__trigger is-closed" aria-expanded="false" aria-disabled="false" aria-controls="collapsible-content-1662960241490" role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="pen-ruler" class="svg-inline--fa fa-pen-ruler " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M469.3 19.3l23.4 23.4c25 25 25 65.5 0 90.5l-56.4 56.4L322.3 75.7l56.4-56.4c25-25 65.5-25 90.5 0zM44.9 353.2L299.7 98.3 413.7 212.3 158.8 467.1c-6.7 6.7-15.1 11.6-24.2 14.2l-104 29.7c-8.4 2.4-17.4 .1-23.6-6.1s-8.5-15.2-6.1-23.6l29.7-104c2.6-9.2 7.5-17.5 14.2-24.2zM249.4 103.4L103.4 249.4 16 161.9c-18.7-18.7-18.7-49.1 0-67.9L94.1 16c18.7-18.7 49.1-18.7 67.9 0l19.8 19.8c-.3 .3-.7 .6-1 .9l-64 64c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l64-64c.3-.3 .6-.7 .9-1l45.1 45.1zM408.6 262.6l45.1 45.1c-.3 .3-.7 .6-1 .9l-64 64c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l64-64c.3-.3 .6-.7 .9-1L496 350.1c18.7 18.7 18.7 49.1 0 67.9L417.9 496c-18.7 18.7-49.1 18.7-67.9 0l-87.4-87.4L408.6 262.6z"></path></svg>Exercises<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angles-down" class="svg-inline--fa fa-angles-down " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M246.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 402.7 361.4 265.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-160 160zm160-352l-160 160c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 210.7 361.4 73.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3z"></path></svg></span><div id="collapsible-content-1662960241490" class="Collapsible__contentOuter" style="height: 0px; -webkit-transition: height 300ms ease; ms-transition: height 300ms ease; transition: height 300ms ease; overflow: hidden;" role="region" aria-labelledby="collapsible-trigger-1662960241490"><div class="Collapsible__contentInner">
<p>Use <code>pivot_wider</code> to try and make <code>sgf_wide</code> from <code>sgf</code>. The two arguments you need are <code>names_from</code> and <code>values_from</code>, which specify the names and values (just like in <code>pivot_longer</code>).</p>
</div></div></div></div></div>
</div>
<div id="tidyverse-chapter-sumamry" class="section level2" number="20.4">
<h2><span class="header-section-number">C.4</span> Tidyverse: Chapter sumamry</h2>
<p>The <code>tidyverse</code> has been a transformative tool for data analysis. With a little practice it can make many seemingly-difficult tasks surprisingly easy. We encourage you to continue practicing and reading examples online, as there are often clever ways to use this idiom to make complex data-related tasks much more manageable.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-stiller2015" class="csl-entry">
Stiller, A. J., Goodman, N. D., &amp; Frank, M. C. (2015). Ad-hoc implicature in preschool children. <em>Language Learning and Development</em>, <em>11</em>(2), 176–190.
</div>
<div id="ref-wickham2016" class="csl-entry">
Wickham, H., &amp; Grolemund, G. (2016). <em>R for data science: Import, tidy, transform, visualize, and model data</em>. &quot; O’Reilly Media, Inc.&quot;.
</div>
</div>

</div>
</div>



<script type="module" src="/assets/src/index.page.client.jsx.75256841.js"></script><script id="vite-plugin-ssr_pageContext" type="application/json">{"pageContext":{"_pageId":"/src/index","islands":[{"id":"island_0","name":"TOC","props":{}},{"id":"island_1","name":"Box","props":{"title":"!undefined","type":"learning_goals","content":"\n\u003cul>\n\u003cli>Explain what “tidy data” is and why it’s a useful uniform format for behavioral data\u003c/li>\n\u003cli>Master a set of tidyverse “verbs” for manipulating tidy data\u003c/li>\n\u003cli>Begin exploring the set of tools that will let you make untidy data tidier.\u003c/li>\n\u003cli>Explore extensions within this ecosystem\u003c/li>\n\u003c/ul>\n"}},{"id":"island_2","name":"Box","props":{"title":"!undefined","type":"exercises","content":"\n\u003cp>Write \u003ccode>round(mean(gpm(mtcars$mpg)), digits = 2)\u003c/code> with pipes.\u003c/p>\n"}},{"id":"island_3","name":"Box","props":{"title":"!undefined","type":"exercises","content":"\n\u003cp>Filter the \u003ccode>sgf\u003c/code> data so that only the “face” trial in the “Label” condition is present.\u003c/p>\n"}},{"id":"island_4","name":"Box","props":{"title":"!undefined","type":"exercises","content":"\n\u003cp>Challenge: Adapt the code above to split the data by item, rather than by age group. For an extra challenge, plot the data this way as well.\u003c/p>\n"}},{"id":"island_5","name":"Box","props":{"title":"!undefined","type":"exercises","content":"\n\u003cp>Use \u003ccode>pivot_wider\u003c/code> to try and make \u003ccode>sgf_wide\u003c/code> from \u003ccode>sgf\u003c/code>. The two arguments you need are \u003ccode>names_from\u003c/code> and \u003ccode>values_from\u003c/code>, which specify the names and values (just like in \u003ccode>pivot_longer\u003c/code>).\u003c/p>\n"}}]}}</script></body>
</html>
